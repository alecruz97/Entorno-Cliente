<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8">
		<title>Ejercicio 1 - XXX</title>
            <script type="text/javascript">
            var si = setInterval(tiempo,1000);
            //var to = setTimeout(bomba ,10000); //La bomba no explota
            function numAles(){
               num1.value = Math.floor(Math.random()*100+1);
               num2.value = Math.floor(Math.random()*100+1);
               num3.value = Math.floor(Math.random()*100+1);
               horas.value = Math.floor(Math.random()*(2017-1970) + 1970);
               timeleft.value = 3;
            }
           
            function abrirVentana(time, shots){
                var hija = window.open("","","width=300, height=100, top=1000, left=1500");
                hija.document.write("Te ha sobrado " + time + " segundos <br/> Has acertado " + shots + " preguntas.");
            }      

            function tiempo(){
                if(timeleft.value==0){
                    clearInterval(si);
                    bomba();
                }else{
                    timeleft.value-=1;
                }
            }
            function bomba(){
                var bomb = window.open("","","width=300, height=100, top=1000, left=1500");
                bomb.document.write("LA BOMBA HA EXPLOTADO");
                boton.disabled=true;
                
                //window.open("","","width=300, height=100, top=1000, left=1500").document.write("LA BOMBA HA EXPLOTADO");
            }
            
            
            function evaluar(){
                boton.disabled=true;
                clearInterval(si);
      
                var acertadas=0;
                var nums = [num1.value, num2.value, num3.value];
                if(Math.max(...nums) == inputnum.value){
                    acertadas++;
                }
                
                var hoy = new Date();
                var tot = hoy.getFullYear() - horas.value;

                if(tot == inputhoras.value){
                    acertadas++;
                }
                
                abrirVentana(parseInt(timeleft.value), acertadas);
            }

            window.onload = numAles;
        </script>
	</head>
	<body>
		<form >
			<h1>QUIZ DOÑANA</h1>
			<p>
				<label>Pregunta 1: ¿Cuál es el número mayor?</label>
				<input type ='number' id="num1" readonly>
				<input type ='number' id="num2" readonly>
				<input type ='number' id="num3" readonly>
				<input type='text' id="inputnum">	
			</p>
			<p>
				<label>Pregunta 2: ¿Cuántas horas han pasado?</label>
				<input type='text' id="horas" readonly>	
				<input type='text' id="inputhoras">	
			</p>
			<p>
				<label>TIEMPO</label>
				<input type='number' id="timeleft" readonly>	
			</p>
			<input type='button' id="boton" value="Contestar" onclick="evaluar()">
			
		</form>

		
	</body>
</html>